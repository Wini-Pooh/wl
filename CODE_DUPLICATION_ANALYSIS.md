# üîß –û–¢–ß–ï–¢: –ê–Ω–∞–ª–∏–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –∫–æ–¥–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏

## ‚ùå –û–ë–ù–ê–†–£–ñ–ï–ù–ù–´–ï –ü–†–û–ë–õ–ï–ú–´

### 1. **–ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö AJAX –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**
**–ü—Ä–æ–±–ª–µ–º–∞:** `initFinanceAjax()` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –≤ 5 —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö:
- `finance.blade.php` (pages)
- `finance-modal.blade.php` 
- `work-modal.blade.php`
- `material-modal.blade.php` 
- `transport-modal.blade.php`

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –Ω–∞–≤–µ—à–∏–≤–∞—é—Ç—Å—è –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω–æ
- –ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ AJAX –∑–∞–ø—Ä–æ—Å–æ–≤
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ —É—Ç–µ—á–∫–∏ –ø–∞–º—è—Ç–∏

### 2. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ window.projectId –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**
**–ü—Ä–æ–±–ª–µ–º–∞:** `window.projectId` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤:
- `project-base.blade.php` (–æ—Å–Ω–æ–≤–Ω–æ–π layout)
- `finance.blade.php` (–¥—É–±–ª–∏—Ä—É–µ—Ç—Å—è)
- –ü—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –≤ `photo-modal.blade.php` –±–µ–∑ –≥–∞—Ä–∞–Ω—Ç–∏–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### 3. **–ö–æ–Ω—Ñ–ª–∏–∫—Ç—ã —Ñ–ª–∞–≥–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ñ–ª–∞–≥–∏ —Å –ø–æ—Ö–æ–∂–∏–º–∏ –∏–º–µ–Ω–∞–º–∏:
- `window.designModalInitialized`
- `window.designUploadHandlersInitialized` 
- `window.documentModalInitialized`
- `window.eventModalInitialized`
- `window.financeModalInitialized`
- `window.financeAjaxInitialized`
- `window.stageModalInitialized`
- `window.projectMainModalInitialized`

### 4. **–ü–æ–≤—Ç–æ—Ä–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ JavaScript –∫–æ–¥–∞**
**–ü—Ä–æ–±–ª–µ–º–∞:** –í –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ (pages/) –¥—É–±–ª–∏—Ä—É—é—Ç—Å—è:
- `initXxxPage()` —Ñ—É–Ω–∫—Ü–∏–∏ —Å –ø–æ—Ö–æ–∂–µ–π –ª–æ–≥–∏–∫–æ–π
- `$(document).ready()` –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- –ü–æ—Ö–æ–∂–∏–µ —Ñ—É–Ω–∫—Ü–∏–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —á–µ—Ä–µ–∑ AJAX

### 5. **–ù–µ–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**
**–ü—Ä–æ–±–ª–µ–º–∞:** –†–∞–∑–Ω—ã–µ –ø–æ–¥—Ö–æ–¥—ã –≤ —Ä–∞–∑–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö:
- –û–¥–Ω–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `DOMContentLoaded`
- –î—Ä—É–≥–∏–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `$(document).ready()`
- –¢—Ä–µ—Ç—å–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç `window.onload`

## ‚úÖ –ü–õ–ê–ù –ò–°–ü–†–ê–í–õ–ï–ù–ò–ô

### 1. **–°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**
```javascript
// public/js/project-initialization-manager.js
class ProjectInitializationManager {
    constructor(projectId) {
        this.projectId = projectId;
        this.initialized = new Set();
    }
    
    initOnce(key, initFunction) {
        if (!this.initialized.has(key)) {
            initFunction();
            this.initialized.add(key);
        }
    }
}
```

### 2. **–û–±—ä–µ–¥–∏–Ω–∏—Ç—å –≤—Å–µ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏**
```javascript
// public/js/finance-unified-init.js
class FinanceManager {
    static init(projectId) {
        if (!window.financeManagerInitialized) {
            // –ï–¥–∏–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –¥–ª—è –≤—Å–µ—Ö —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –º–æ–¥–∞–ª–µ–π
            window.financeManagerInitialized = true;
        }
    }
}
```

### 3. **–£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Å—Ç—Ä–∞–Ω–∏—Ü**
```javascript
// –í –∫–∞–∂–¥–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ pages/
window.projectManager?.initPage('finance', () => {
    // –õ–æ–≥–∏–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è —Ñ–∏–Ω–∞–Ω—Å–æ–≤
});
```

### 4. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å project-base.blade.php**
- –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è —Å–∫—Ä–∏–ø—Ç—ã
- –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞ –¥–ª—è –≤—Å–µ—Ö –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–π
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω

### 5. **–°–æ–∑–¥–∞—Ç—å —Å–∏—Å—Ç–µ–º—É –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
```javascript
// public/js/dependency-manager.js
class DependencyManager {
    static ensure(dependency, callback) {
        if (window[dependency]) {
            callback();
        } else {
            // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
        }
    }
}
```

## üìã –ö–û–ù–ö–†–ï–¢–ù–´–ï –î–ï–ô–°–¢–í–ò–Ø

### –≠—Ç–∞–ø 1: –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–∑–æ–≤–æ–π –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
1. –°–æ–∑–¥–∞—Ç—å `public/js/project-initialization-manager.js`
2. –°–æ–∑–¥–∞—Ç—å `public/js/finance-unified-init.js` 
3. –°–æ–∑–¥–∞—Ç—å `public/js/dependency-manager.js`

### –≠—Ç–∞–ø 2: –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ —Ñ–∏–Ω–∞–Ω—Å–æ–≤—ã—Ö –º–æ–¥–∞–ª–µ–π
1. –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –≤—ã–∑–æ–≤—ã `initFinanceAjax()`
2. –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞—Ç—å –≤ –æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
3. –û–±–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–≤—è–∑–∞–Ω–Ω—ã–µ –º–æ–¥–∞–ª–∏

### –≠—Ç–∞–ø 3: –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è pages/
1. –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞—Ç—å –ø–∞—Ç—Ç–µ—Ä–Ω –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
2. –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä—É—é—â–∏–π—Å—è –∫–æ–¥
3. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–¥–∏–Ω—ã–π –º–µ–Ω–µ–¥–∂–µ—Ä

### –≠—Ç–∞–ø 4: –û—á–∏—Å—Ç–∫–∞ project-base
1. –£–±—Ä–∞—Ç—å –ª–∏—à–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç—ã
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
3. –°–æ–∑–¥–∞—Ç—å –µ–¥–∏–Ω—É—é —Ç–æ—á–∫—É –≤—Ö–æ–¥–∞

## üéØ –û–ñ–ò–î–ê–ï–ú–´–ï –†–ï–ó–£–õ–¨–¢–ê–¢–´

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚¨áÔ∏è –£–º–µ–Ω—å—à–µ–Ω–∏–µ –≤—Ä–µ–º–µ–Ω–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ 20-30%
- ‚¨áÔ∏è –°–Ω–∏–∂–µ–Ω–∏–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –ø–∞–º—è—Ç–∏
- ‚¨áÔ∏è –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ JavaScript

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å
- üìù –ï–¥–∏–Ω—ã–π —Å—Ç–∏–ª—å –∫–æ–¥–∞
- üß© –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞
- üêõ –ú–µ–Ω—å—à–µ –±–∞–≥–æ–≤ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π

### –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å
- üîí –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω–æ–π –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏
- ‚ö° –°—Ç–∞–±–∏–ª—å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –º–æ–¥–∞–ª—å–Ω—ã—Ö –æ–∫–æ–Ω
- üéØ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü–∞—Ö
