# JavaScript файлы системы управления документами

## Структура файлов (оптимизированная)

### Основные файлы менеджеров
- **`document-manager-fixed.js`** (20KB) - Менеджер документов с исправлениями загрузки
- **`design-manager-fixed.js`** (21KB) - Менеджер дизайнов с исправлениями метаданных  
- **`photo-manager-fixed.js`** (21KB) - Менеджер фотографий с исправлениями категорий

### Системы и вспомогательные файлы
- **`core-helpers.js`** (14KB) - Объединенные вспомогательные функции:
  - AJAX запросы (`ajaxRequest`)
  - Уведомления (`showMessage`)
  - Маска телефона (`initPhoneMask`)  
  - Фильтры вкладок (`initTabFilters`)

- **`file-managers-init.js`** (6KB) - Инициализация всех файловых менеджеров
- **`enhanced-modals.js`** (15KB) - Улучшенная система модальных окон
- **УДАЛЕН** - Система шаблонов документов (удалена)
- **`estimate-autosave.js`** (14KB) - Автосохранение для редактора смет

## Порядок подключения файлов

1. `core-helpers.js` - первым (базовые функции)
2. `enhanced-modals.js` - для модальных окон
3. `document-manager-fixed.js` - менеджер документов
4. `design-manager-fixed.js` - менеджер дизайнов  
5. `photo-manager-fixed.js` - менеджер фотографий
6. УДАЛЕН - система шаблонов (удалена)
7. `estimate-autosave.js` - автосохранение (если нужно)
8. `file-managers-init.js` - последним (инициализация)

## Удаленные файлы

Следующие файлы были удалены как устаревшие или пустые:
- `bootstrap-modal-fix.js` (пустой)
- УДАЛЕН - (удален)
- `file-manager.js` (устаревший)
- `file-managers.js` (устаревший) 
- `modal-manager.js` (объединен в enhanced-modals.js)
- `ajax-helper.js` (объединен в core-helpers.js)
- `notifications.js` (объединен в core-helpers.js)
- `phone-mask.js` (объединен в core-helpers.js)
- `tab-filters-fix.js` (объединен в core-helpers.js)

## Основные функции

### DocumentManagerFixed
- Загрузка и отображение документов
- Фильтрация по категориям  
- Сохранение метаданных при загрузке
- AJAX обновление без перезагрузки

### DesignManagerFixed  
- Управление файлами дизайна
- Сохранение типа дизайна и помещения
- Превью изображений
- Фильтрация и поиск

### PhotoManagerFixed
- Загрузка и каталогизация фотографий
- Сохранение категорий и локаций
- Галерея с превью
- Массовая загрузка

### Core Helpers
- `ajaxRequest()` - универсальные AJAX запросы
- `showMessage()` - системные уведомления
- `initPhoneMask()` - маска ввода телефона
- `initTabFilters()` - фильтры для вкладок

## Инициализация

Все менеджеры автоматически инициализируются через `file-managers-init.js`.

Для ручной инициализации используйте:
```javascript
window.reinitFileManagers();
```

Для проверки статуса:
```javascript
window.checkManagersStatus();
```

## Совместимость

Все файлы совместимы с:
- jQuery 3.x
- Bootstrap 5.x  
- Современными браузерами (ES6+)

Система оптимизирована для минимального количества HTTP запросов и максимальной производительности.
